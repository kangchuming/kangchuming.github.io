# HTTP 状态码详解

## 一、状态码分类

### 1. 1xx（信息响应）
- **100 Continue**
  - 客户端应继续发送请求的剩余部分
  - 常用于大文件上传前的确认
  - 示例：上传大文件前的预检

- **101 Switching Protocols**
  - 服务器同意切换协议
  - 常用于从 HTTP 升级到 WebSocket
  - 示例：WebSocket 握手过程

### 2. 2xx（成功）
- **200 OK**
  - 请求成功，服务器返回所需数据
  - 最常见的成功状态码
  - 示例：正常访问网页

- **201 Created**
  - 资源创建成功
  - 常用于 POST 或 PUT 请求
  - 示例：创建新用户

- **204 No Content**
  - 请求成功，但无返回内容
  - 常用于删除操作
  - 示例：删除资源成功

### 3. 3xx（重定向）
- **301 Moved Permanently**
  - 资源永久重定向到新 URL
  - 浏览器会缓存重定向
  - 示例：网站域名变更

- **302 Found**
  - 资源临时重定向
  - 请求方法可能变为 GET
  - 示例：临时维护页面

- **304 Not Modified**
  - 资源未修改，客户端可使用缓存
  - 用于缓存优化
  - 示例：使用本地缓存

- **307 Temporary Redirect**
  - 临时重定向，保留原始请求方法
  - 示例：POST 请求临时重定向

- **308 Permanent Redirect**
  - 永久重定向，保留原始请求方法
  - 示例：API 端点永久迁移

### 4. 4xx（客户端错误）
- **400 Bad Request**
  - 请求格式错误
  - 参数缺失或语法错误
  - 示例：请求参数格式错误

- **401 Unauthorized**
  - 未提供有效身份验证
  - 需要登录或 Token
  - 示例：未登录访问受限资源

- **403 Forbidden**
  - 服务器拒绝请求
  - 认证成功但无权限
  - 示例：普通用户访问管理员页面

- **404 Not Found**
  - 资源不存在
  - 路径错误或已被删除
  - 示例：访问不存在的页面

- **405 Method Not Allowed**
  - 请求方法不被允许
  - 示例：GET 接口用了 POST 方法

- **408 Request Timeout**
  - 服务器等待请求超时
  - 示例：请求处理时间过长

- **429 Too Many Requests**
  - 客户端请求频率过高
  - 被限流
  - 示例：API 调用频率超限

### 5. 5xx（服务器错误）
- **500 Internal Server Error**
  - 通用服务器错误
  - 代码异常或配置问题
  - 示例：服务器代码崩溃

- **502 Bad Gateway**
  - 网关/代理服务器收到无效响应
  - 示例：上游服务崩溃

- **503 Service Unavailable**
  - 服务器暂时不可用
  - 维护或过载
  - 示例：服务器维护中

- **504 Gateway Timeout**
  - 网关/代理服务器未及时收到上游响应
  - 示例：上游服务响应超时

- **505 HTTP Version Not Supported**
  - 服务器不支持请求的 HTTP 版本
  - 示例：使用过时的 HTTP 版本

## 二、常见场景

### 1. 正常访问
- 访问成功页面 → 200 OK
- 使用缓存资源 → 304 Not Modified
- 创建新资源 → 201 Created

### 2. 重定向场景
- 网站迁移 → 301 Moved Permanently
- 临时维护 → 302 Found
- API 端点变更 → 308 Permanent Redirect

### 3. 错误处理
- 未登录访问 → 401 Unauthorized
- 权限不足 → 403 Forbidden
- 资源不存在 → 404 Not Found
- 服务器错误 → 500 Internal Server Error
- 服务不可用 → 503 Service Unavailable

## 三、最佳实践

### 1. 状态码选择
- 根据操作结果选择合适的状态码
- 保持状态码的一致性
- 避免滥用通用状态码

### 2. 错误处理
- 提供清晰的错误信息
- 包含错误详情（如错误码）
- 给出解决建议

### 3. 缓存控制
- 合理使用 304 状态码
- 设置适当的缓存策略
- 考虑资源更新频率

## 四、总结

### 1. 核心要点
- 状态码反映请求处理结果
- 不同状态码对应不同场景
- 合理使用状态码提升 API 质量

### 2. 使用建议
- 遵循 HTTP 规范
- 保持状态码语义清晰
- 提供必要的错误信息